!function(a){var r,i,c,f,o,u,s,g,d,e,n,t,h,l,p,_,y={},v=[],b=[],x=void 0,w=["singleTap","doubleTap","hold","swipe","swiping","swipeLeft","swipeRight","swipeUp","swipeDown","rotate","rotating","rotateLeft","rotateRight","pinch","pinching","pinchIn","pinchOut","drag","dragLeft","dragRight","dragUp","dragDown"];a.each({touch:"touchstart",tap:"tap"},function(e,n){a.fn[e]=function(e){return a(document.body).on(n,this,e)}}),a.each(w,function(e,n){a.fn[n]=function(e){return this.on(n,this.selector,e)}}),a(document).ready(function(){return e()}),e=function(){return a(document.body).on("touchstart",h).on("touchmove",t).on("touchend",n).on("touchcancel",f)},h=function(e){var n,t=Date.now(),i=t-(y.last||t);return x&&clearTimeout(x),e=(n=s(e)).length,v=u(n,e),y.el=a(l(n[0].target)),y.fingers=e,y.last=t,1===e?(y.isDoubleTap=0<i&&i<=250,setTimeout(g,650)):2===e?(y.initial_angle=parseInt(r(v),10),y.initial_distance=parseInt(o(v),10),y.angle_difference=0,y.distance_difference=0):void 0},t=function(e){var n,t;return y.el&&((n=(t=s(e)).length)===y.fingers?(b=u(t,n),d(e)&&_("swiping"),2===n&&(c(),i(),e.preventDefault())):f()),!0},d=function(){var e,n,t=!1;return b[0]&&(e=100<Math.abs(v[0].x-b[0].x),n=100<Math.abs(v[0].y-b[0].y),t=y.el&&(e||n)),t},n=function(){var e,n;return 1===y.fingers?d()?(_("swipe"),n=p(v[0].x,b[0].x,v[0].y,b[0].y),_("swipe"+n),f()):y.isDoubleTap?(_("doubleTap"),f()):x=setTimeout(function(){_("singleTap"),f()},250):2===y.fingers?(n=!1,0!==y.angle_difference&&(_("rotate",{angle:y.angle_difference}),e=0<y.angle_difference?"rotateRight":"rotateLeft",_(e,{angle:y.angle_difference}),n=!0),0!==y.distance_difference&&(_("pinch",{angle:y.distance_difference}),e=0<y.distance_difference?"pinchOut":"pinchIn",_(e,{distance:y.distance_difference}),n=!0),!n&&b[0]&&(10<Math.abs(v[0].x-b[0].x)||10<Math.abs(v[0].y-b[0].y))&&(_("drag"),n=p(v[0].x,b[0].x,v[0].y,b[0].y),_("drag"+n)),f()):void 0},u=function(e,n){var t=[],i=0;for(e=e[0].targetTouches||e;i<n;)t.push({x:e[i].pageX,y:e[i].pageY}),i++;return t},c=function(){var e,n=parseInt(r(b),10),t=parseInt(y.initial_angle-n,10);if(20<Math.abs(t)||0!==y.angle_difference)return e=0,n=y.angle_difference<0?"-":"+",90<Math.abs(t-y.angle_difference)&&e++<10?Function("diff "+n+"= 180;")():(y.angle_difference=parseInt(t,10),_("rotating",{angle:y.angle_difference}))},i=function(){var e=parseInt(o(b),10),e=y.initial_distance-e;if(10<Math.abs(e))return y.distance_difference=e,_("pinching",{distance:e})},_=function(e,n){if(y.el)return n=n||{},b[0]&&(n.iniTouch=1<y.fingers?v:v[0],n.currentTouch=1<y.fingers?b:b[0]),y.el.trigger(e,n)},f=function(){return v=[],b=[],y={},clearTimeout(x)},r=function(e){var n=e[0],e=e[1],n=Math.atan(-1*(e.y-n.y)/(e.x-n.x))*(180/Math.PI);return n<0?180+n:n},o=function(e){var n=e[0],e=e[1];return-1*Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))},s=function(e){e=e.originalEvent||e;return e.touches||[e]},l=function(e){return"tagName"in e?e:e.parentNode},p=function(e,n,t,i){return Math.abs(e-n)>=Math.abs(t-i)?0<e-n?"Left":"Right":0<t-i?"Up":"Down"},g=function(){if(y.last&&650<=Date.now()-y.last)return _("hold"),f()}}(jQuery);